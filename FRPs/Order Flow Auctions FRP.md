---
id:
title: Analyzing Orderflow Auctions
team: Pranav Garimidi, Allejo Salles
created: 2022-03-18
---

# Order Flow Auctions
This work will explore the design space of what incorporating order flow auctions into Flashbots could look like. Currently the Flashbots relay consists of a single  auction where searchers source their own MEV opportunities and bid for blockspace to get their transactions on chain. One downside of this approach is that users do not get any of the MEV generated by their transactions; instead all the MEV is split between the searchers and miners. Orderflow auctions could help solve this problem by allowing users to auction off their transactions to searchers allowing them to capture some of the MEV from those transactions. 

## Background and Problem Statement

Adding orderflow auctions on top of the existing blockspace auctions introduces lots of complexity into the game theoretic analysis of how searchers should behave.  At the end of the day, there is a fixed amount of MEV that can be extracted from a given transaction. Currently, that value is split between searchers and miners through the blockspace auction. Introducing the orderflow auction would ask that same amount of MEV now be split three ways with users included. Searchers now have to split their potential revenue from MEV between both orderflow auctions and blockspace auctions.  That necessarily  means either searchers or miners will have their revenues reduced. Keeping all these groups happy and willing participants of Flashbots will require carefully designing the orderflow auction.

There are a few key questions when designing these order flow auctions. Any auction fundamentally consists of two parts, an allocation rule and a payment rule. This auction will consist of a set of transactions users are selling off. Searchers will then place bids on different transactions of interest. The auction then has to decide how to allocate the transactions to the searchers based on their bids and how much they should pay. One immediate difficulty is that this is a combinatorial auction. Searchers have values over sets of transactions they can efficiently bundle together rather than individual transactions. Efficient combinatorial auction design is a famously difficult problem in AGT. There is an added difficulty that these auctions must conclude very quickly so that these transactions can be included in near blocks. Developing allocation and payment rules that are efficient and can be computed quickly for orderflow auctions will be a central question in this work.

Another central question will be how searchers optimally interact with both orderflow and blockspace auctions. Searchers only have value for what they win in the orderflow auction if they can win enough space in the blockspace auction to include their transactions. If these auctions are conducted simultaneously that means searchers might have to purchase blockspace before they know how much they need. If the auctions aren't run simultaneously there are potential concerns about latency.  How much searchers bid in these two auctions also implicitly determines how much revenue users versus miners make affecting their incentives as well. Typically the combination of two incentive compatible mechanisms is no longer incentive compatible. Understanding searcher dynamics in this setting will be crucial to understanding the robustness of combining the auctions.

The final question is to understand to what extent it is possible to combine the orderflow and blockspace auctions into a single entity. Such an auction could eliminate the complex dynamics searchers would have to face participating in two related auctions. The difficulty here is designing a mechanism that allows users to submit transactions that searchers can win and then guarantee their inclusion in the block. Understanding the objectives for the allocation and payment rules in this setting is more complex than the orderflow and blockspace auctions separated.


## Plan and Deliverables
* Develop a formal model of orderflow auctions
  * Design allocation rules and pricing rules
  * Develop conditions for incentive compatibility  in orderflow auctions
  * Define new terminology to capture the differences between orderflow and blockspace auctions
* Analyze the game theoretic behavior from searchers participating in an orderflow auction followed by participating in a blockspace auction
  * Conduct a revenue analysis for users, searchers, and miners over different designs
  * Understand to what extent incentive compatibility  is possible in this setting
  * Come up with impossibility results demarking what is possible in the design space
* Consider ways of possibly combining the orderflow auction and blockspace auction io mitigate concerns about their interplay
* Consider how orderflow auctions open new avenues of collusion between searchers

## References
[Algorithmic Game Theory](https://www.cs.cmu.edu/~sandholm/cs15-892F13/algorithmic-game-theory.pdf)
[Mechanism Design and Approximation](http://jasonhartline.com/MDnA/MDnA-ch1to8.pdf)
